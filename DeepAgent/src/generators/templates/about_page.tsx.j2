import Image from 'next/image'
import Link from 'next/link'
import SEO from '@/components/SEO'
import Footer from '@/components/Footer'

export const metadata = {
  title: {{ (about_content.title ~ ' | ' ~ business.name) | tojson }},
  description: {{ (about_content.description[:160] if about_content.description else '') | tojson }},
}

export default function AboutPage() {
  const aboutImage = {{ (image_urls.get('about', '') if image_urls else '') | tojson }};

  return (
    <>
      <SEO />
      
      {/* Hero Section */}
      <section className="bg-primary text-white py-20 px-4">
        <div className="container mx-auto max-w-4xl text-center">
          <h1 className="font-heading text-5xl md:text-6xl font-bold mb-6">
            {{ about_content.title }}
          </h1>
        </div>
      </section>

      {/* Main Content - with optional about image */}
      <section className="py-20 px-4">
        <div className="container mx-auto max-w-4xl">
          {aboutImage ? (
            <div className="relative h-72 md:h-96 rounded-2xl overflow-hidden mb-12 shadow-xl">
              <Image
                src={aboutImage}
                alt="About {{ business.name }}"
                fill
                className="object-cover"
                unoptimized
              />
            </div>
          ) : null}
          <div className="prose prose-lg max-w-none">
            <div className="mb-10">
              <p className="text-lg text-content leading-relaxed whitespace-pre-line">
                {{ about_content.description }}
              </p>
            </div>

            {% if about_content.history %}
            <div className="mb-10">
              <h2 className="font-heading text-3xl font-bold text-content mb-4">Our Story</h2>
              <p className="text-lg text-content-muted leading-relaxed whitespace-pre-line">
                {{ about_content.history }}
              </p>
            </div>
            {% endif %}

            {% if about_content['values'] and about_content['values']|length > 0 %}
            <div className="mb-10">
              <h2 className="font-heading text-3xl font-bold text-content mb-6">Our Values</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {% for value in about_content['values'] %}
                <div className="bg-surface p-6 rounded-xl border border-primary/10">
                  <h3 className="font-heading text-xl font-semibold text-primary mb-2">
                    {{ value }}
                  </h3>
                </div>
                {% endfor %}
              </div>
            </div>
            {% endif %}

            <div className="bg-surface p-8 rounded-2xl mt-12 border border-primary/10">
              <h2 className="font-heading text-2xl font-bold text-content mb-4">
                Why Choose {{ business.name }}?
              </h2>
              <ul className="list-disc list-inside space-y-2 text-content-muted">
                <li>Located in {{ business.city }}{% if business.state %}, {{ business.state }}{% endif %}</li>
                <li>Experienced in {{ business.industry }} services</li>
                {% if business.rating %}
                <li>{{ business.rating }}-star rated business</li>
                {% endif %}
                <li>Committed to customer satisfaction</li>
                <li>Professional and reliable service</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      {/* Contact CTA */}
      <section className="py-20 px-4 bg-surface">
        <div className="container mx-auto max-w-4xl text-center">
          <h2 className="font-heading text-3xl font-bold text-content mb-4">
            Get In Touch
          </h2>
          <p className="text-lg text-content-muted mb-8">
            Have questions or want to learn more? Contact us today!
          </p>
          <Link
            href="/contact"
            className="inline-block bg-[var(--theme-primary,var(--color-primary))] text-[var(--theme-onPrimary,#fff)] px-8 py-4 rounded-xl font-semibold hover:opacity-90 transition-all duration-300"
          >
            Contact Us
          </Link>
        </div>
      </section>
      <Footer />
    </>
  )
}
